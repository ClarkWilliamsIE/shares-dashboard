<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PLTR Dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- PapaParse -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

  <style>
    body { font-family: sans-serif; padding: 2rem; }
    canvas { max-width: 700px; margin: 2rem auto; display: block; }
  </style>
</head>

<body>
  <h1>PLTR: Purchase vs Current</h1>
  <canvas id="pltrChart" height="300"></canvas>

  <script>
    const csvUrl = 
      'https://docs.google.com/spreadsheets/d/e/2PACX-1vQEJMIKmxhiNNEJ8h-sgxpsSAT8ndO5TK0EVCijAoAv4y-cmmU0YSHFUX8mC6gMBouC9k50FVFQLawN/pub?gid=1666283294&single=true&output=csv';

    Papa.parse(csvUrl, {
      download: true,
      header: true,
      complete: ({ data }) => {
        // grab your PLTR row
        const r = data.find(r => r.Ticker === 'PLTR');
        const avgCost     = parseFloat(r['Average cost'].replace(/,/g,''));
        const price       = parseFloat(r.Price.replace(/,/g,''));
        const totalCost   = parseFloat(r['Total Cost'].replace(/,/g,''));
        const marketValue = parseFloat(r['Market Value'].replace(/,/g,''));

        new Chart(document.getElementById('pltrChart'), {
          type: 'bar',
          data: {
            labels: ['Per Share', 'Aggregate'],
            datasets: [
              {
                label: 'Purchased',
                data: [avgCost, totalCost],
                backgroundColor: 'rgba(54,162,235,0.6)'
              },
              {
                label: 'Current',
                data: [price, marketValue],
                backgroundColor: 'rgba(255,159,64,0.6)'
              }
            ]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true,
                title: { display: true, text: 'USD' }
              }
            },
            plugins: {
              legend: { position: 'bottom' }
            }
          }
        });
      },
      error: err => console.error('CSV load error:', err)
    });
  </script>
</body>
</html>

