<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Watchlist Voting</title>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root { color-scheme: dark; }
    * { box-sizing: border-box; }
    body { margin:0; background:#121212; color:#fff; font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    header { display:flex; align-items:center; justify-content:space-between; padding:12px 16px; position:sticky; top:0; background:rgba(18,18,18,.9); border-bottom:1px solid #222; z-index:20; }
    h1 { font-size:1.05rem; margin:0; }
    main { padding:16px; max-width:1040px; margin:0 auto; }
    .card { background:#1e1e1e; border:1px solid #2a2a2a; border-radius:12px; padding:14px; box-shadow:0 2px 12px rgba(0,0,0,.25); }
    .row { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
    .row input, .row select { background:#0f0f0f; color:#fff; border:1px solid #333; border-radius:10px; padding:.6rem .7rem; }
    .btn { padding:.6rem .9rem; border-radius:10px; border:1px solid #333; background:#1f2937; color:#fff; cursor:pointer; transition:opacity .15s ease; }
    .btn:hover { background:#273244; }
    .btn[disabled] { opacity:.6; cursor:not-allowed; }
    .btn-cta { background:#2563eb; border-color:#2563eb; }
    .btn-cta:hover { background:#1d4ed8; }
    .btn-ghost { background:#111; }
    .grid { display:grid; grid-template-columns: 1fr; gap:.75rem; margin-top:1rem; }
    @media (min-width: 980px) { .grid { grid-template-columns: 1fr 1fr; } }

    /* list item */
    .item {
      display:flex; flex-wrap:wrap; gap:.75rem;
      align-items:stretch;
      background:#171717; border:1px solid #262626; border-radius:12px; padding:12px;
    }
    .scorebox {
      flex:0 0 auto;
      min-width:84px; max-width:120px;
      text-align:center; border:1px solid #333; border-radius:10px; padding:.4rem .5rem; background:#0f0f0f;
    }
    .score { font-size:1.05rem; font-weight:700; }
    .sub { color:#9aa0a6; font-size:.8rem; }
    .grow { flex:1 1 220px; min-width:0; }
    .ticker { font-weight:700; letter-spacing:.5px; margin-bottom:.15rem; overflow-wrap:anywhere; }
    .muted { color:#9aa0a6; font-size:.9rem; overflow-wrap:anywhere; }
    .pct { font-weight:700; }
    .pct.up { color:#22c55e; }
    .pct.down { color:#ef4444; }

    .vote, .archive, .unarchive {
      padding:.55rem .9rem;
      border-radius:10px; border:1px solid #333;
      background:#111; color:#fff; cursor:pointer;
      white-space:nowrap; flex:0 0 auto;
    }
    .vote.active { border-color:#22c55e; background:#164e27; }
    .vote[disabled], .archive[disabled], .unarchive[disabled] { opacity:.6; cursor:not-allowed; }

    .right { margin-left:auto; display:flex; gap:.5rem; align-items:center; flex:0 0 auto; }
    @media (max-width: 540px) { .right { width:100%; justify-content:flex-end; margin-left:0; } }

    .danger { border-color:#ef4444; }
    .ok { color:#86efac; }
    .error { color:#fca5a5; }
    .topbar { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; margin-bottom:.75rem; }
    #err { margin:.5rem 0; color:#fca5a5; display:none; }

    /* Loading overlay */
    .loading-veil {
      position: fixed; inset: 0;
      background: rgba(0,0,0,.45);
      display: none;
      align-items: center; justify-content: center;
      z-index: 50;
      backdrop-filter: blur(2px);
    }
    .loading-box {
      background:#1d1d1d;
      border:1px solid #2a2a2a;
      border-radius:12px;
      padding:14px 16px;
      display:flex; align-items:center; gap:.75rem;
      box-shadow:0 6px 24px rgba(0,0,0,.35);
    }
    .spinner {
      width:18px; height:18px; border:3px solid #2f2f2f; border-top-color:#60a5fa; border-radius:50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Archived list card */
    .archive-wrap { max-height: 280px; overflow:auto; display:flex; flex-direction:column; gap:.5rem; }
    .arch-item { display:flex; align-items:flex-start; gap:.75rem; padding:.6rem .7rem; border:1px solid #2a2a2a; border-radius:10px; background:#141414; }
    .arch-left { flex:1 1 auto; min-width:0; }
    .arch-actions { flex:0 0 auto; display:flex; gap:.5rem; }
  </style>
</head>
<body>
  <header>
    <h1>Watchlist Voting</h1>
    <div>
      <button class="btn" onclick="location.href='members.html'">Back to dashboard</button>
      <button class="btn danger" id="btnSignOut">Sign out</button>
    </div>
  </header>

  <div id="loading" class="loading-veil" aria-hidden="true">
    <div class="loading-box">
      <div class="spinner" aria-label="Loading"></div>
      <div id="loadingText">Loading, please wait</div>
    </div>
  </div>

  <main>
    <!-- Add form -->
    <section class="card" style="margin-bottom:1rem;">
      <div class="topbar">
        <div class="row" style="flex:1;">
          <input id="ticker" placeholder="Ticker, for example AAPL" />
          <select id="market" aria-label="Market">
            <option value="AUTO" selected>Market, auto</option>
            <option value="NASDAQ">NASDAQ</option>
            <option value="NYSE">NYSE</option>
            <option value="NZE">NZX</option>
            <option value="ASX">ASX</option>
            <option value="LON">LSE</option>
            <option value="TSE">TSX</option>
            <option value="CVE">TSX Venture</option>
            <option value="AMS">Euronext Amsterdam</option>
            <option value="EPA">Euronext Paris</option>
            <option value="FRA">Frankfurt</option>
          </select>
          <input id="notes" placeholder="Notes, for example why this is interesting" style="flex:1;" />
        </div>
        <button class="btn btn-cta" id="addBtn">Add to watchlist</button>
      </div>
      <div id="msg" class="muted" style="margin-top:.5rem;"></div>
      <div id="err"></div>
    </section>

    <!-- Active list -->
    <section class="card" style="margin-bottom:1rem;">
      <div class="row" style="justify-content:space-between; margin-bottom:.5rem;">
        <div class="row" style="flex:1; min-width:0;">
          <label>Filter</label>
          <input id="search" placeholder="Type to filter tickers" style="flex:1; min-width:140px;" />
        </div>
      </div>
      <div id="list" class="grid"></div>
    </section>

    <!-- Archived list in one scrollable card -->
    <section class="card" id="archiveCard">
      <div class="row" style="justify-content:space-between; margin-bottom:.5rem;">
        <h2 style="margin:0; font-size:1rem;">Archived</h2>
        <div class="row">
          <label class="muted">Filter</label>
          <input id="archSearch" placeholder="Filter archived" />
        </div>
      </div>
      <div id="archList" class="archive-wrap"></div>
    </section>

    <!-- Leaderboard at the bottom -->
    <section class="card" id="leaderCard" style="margin-top:1rem;">
      <h2 style="margin:.25rem 0 0.75rem 0; font-size:1rem;">Leaderboard, average percent change by suggester</h2>
      <div id="leaderWrap">
        <div class="muted">Loading leaderboard, please wait</div>
      </div>
    </section>
  </main>

  <script>
    const SUPABASE_URL = "https://acdlgvcxzxjvcwiqlydj.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjZGxndmN4enhqdmN3aXFseWRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2Mjc5NzksImV4cCI6MjA3MjIwMzk3OX0.9ZUURjJT73Igd2tAOv8aSZUmlkEf7DIzmOAGBSjWqCI";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const SHEET_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbxxJKwTe82Td-rMyyJl5FkNMvuVIv30YodBfs3Unz7FtWriXZ__spA2yTkuWvDkYYg0kQ/exec";

    let currentUser = null;
    let items = [];
    let votes = [];
    let myVotes = [];
    let pctMap = {};

    /* Loading helpers */
    let loadingDepth = 0;
    const loadingEl = document.getElementById("loading");
    const loadingTextEl = document.getElementById("loadingText");
    function setLoading(on, text) {
      if (on) {
        loadingDepth += 1;
        if (text) loadingTextEl.textContent = text;
        loadingEl.style.display = "flex";
      } else {
        loadingDepth = Math.max(0, loadingDepth - 1);
        if (loadingDepth === 0) loadingEl.style.display = "none";
      }
    }
    async function withLoading(label, fn) {
      try { setLoading(true, label); return await fn(); }
      finally { setLoading(false); }
    }
    function disable(el, state) { if (el) el.disabled = !!state; }

    /* Error helper */
    function showErr(e) {
      console.error(e);
      const box = document.getElementById("err");
      box.textContent = typeof e === "string" ? e : (e && e.message) ? e.message : "Something went wrong";
      box.style.display = "block";
      setTimeout(() => { box.style.display = "none"; }, 5000);
    }

    /* Timeouts */
    function withTimeout(promise, ms, label) {
      let t;
      const timeout = new Promise((resolve) => {
        t = setTimeout(() => { console.warn((label || "operation") + " timed out at " + ms + " ms"); resolve("__TIMEOUT__"); }, ms);
      });
      return Promise.race([promise, timeout]).then((v) => { clearTimeout(t); return v; });
    }

    /* JSONP loader with timeout and cleanup */
    function loadPctJSONP(tickers, timeoutMs = 3500, cbName = "WL_PCT_CB") {
      return withTimeout(new Promise(resolve => {
        let finished = false;
        const done = (data) => {
          if (finished) return;
          finished = true;
          try { resolve(data && data.data ? data.data : {}); }
          finally {
            try { delete window[cbName]; } catch(_) {}
            try { if (script && script.parentNode) script.parentNode.removeChild(script); } catch(_) {}
          }
        };
        if (window[cbName]) try { delete window[cbName]; } catch(_) {}
        window[cbName] = done;
        const script = document.createElement("script");
        script.src = SHEET_WEBAPP_URL + "?tickers=" + encodeURIComponent(tickers) + "&callback=" + cbName + "&ts=" + Date.now();
        script.onerror = () => done({});
        document.head.appendChild(script);
      }), timeoutMs, "sheet jsonp").then(v => v === "__TIMEOUT__" ? {} : v);
    }

    /* Auth guard */
    async function guard() {
      const sessionRes = await withTimeout(supabase.auth.getSession(), 5000, "getSession");
      const session = sessionRes?.data?.session || null;
      if (!session) { location.href = "login.html"; return; }
      const userRes = await withTimeout(supabase.auth.getUser(), 5000, "getUser");
      const user = userRes?.data?.user || null;
      if (!user) { location.href = "login.html"; return; }
      currentUser = user;
    }

    /* Fetch */
    async function fetchAll() {
      try {
        const itemsRes = await withTimeout(
          supabase.from("watchlist_items").select("*").order("created_at", { ascending: false }),
          6000,
          "items"
        );
        if (itemsRes !== "__TIMEOUT__" && itemsRes?.error) throw itemsRes.error;
        items = itemsRes && itemsRes !== "__TIMEOUT__" ? (itemsRes.data || []) : [];

        const votesRes = await withTimeout(
          supabase.from("watchlist_votes").select("item_id, user_id, value"),
          6000,
          "votes"
        );
        if (votesRes !== "__TIMEOUT__" && votesRes?.error) throw votesRes.error;
        votes = votesRes && votesRes !== "__TIMEOUT__" ? (votesRes.data || []) : [];

        myVotes = votes.filter(v => v.user_id === currentUser.id);

        const uniqueTickers = Array.from(new Set(items.map(i => i.ticker).filter(Boolean))).join(",");
        pctMap = {};
        if (uniqueTickers) {
          pctMap = await loadPctJSONP(uniqueTickers, 3500);
        }
      } catch (e) { showErr(e.message || e); }
    }

    function computeScores() {
      const m = new Map();
      for (const v of votes) m.set(v.item_id, (m.get(v.item_id) || 0) + (v.value || 0));
      return m;
    }

    function pctBadge(ticker) {
      const rec = pctMap[ticker];
      if (!rec || typeof rec.pct !== "number") return `<div class="sub muted">change n/a</div>`;
      const pct = rec.pct * 100;
      const cls = pct >= 0 ? "pct up" : "pct down";
      const priceStr = rec.price ? Number(rec.price).toFixed(2) : "n/a";
      return `<div class="${cls}">${pct.toFixed(2)}%</div><div class="sub">now ${priceStr}</div>`;
    }

    function mergeSortedActive() {
      const scoreMap = computeScores();
      const myMap = new Map(myVotes.map(v => [v.item_id, v.value]));
      const merged = items
        .filter(it => !it.archived)
        .map(it => ({ ...it, score: scoreMap.get(it.id) || 0, myVote: myMap.get(it.id) || 0 }));
      merged.sort((a,b) => b.score - a.score || a.ticker.localeCompare(b.ticker));
      return merged;
    }

    function listArchivedFiltered() {
      const q = (document.getElementById("archSearch").value || "").trim().toUpperCase();
      let arr = items.filter(it => it.archived);
      if (q) arr = arr.filter(i => (i.ticker || "").toUpperCase().includes(q));
      arr.sort((a,b) => (a.ticker || "").localeCompare(b.ticker || ""));
      return arr;
    }

    /* Leaderboard includes archived */
    function computeLeaderboard() {
      const byUser = new Map();
      for (const it of items) {
        const ticker = it.ticker || "";
        const rec = pctMap[ticker];
        const pct = rec && typeof rec.pct === "number" ? rec.pct : null;
        if (pct === null) continue;
        const name = it.suggested_by_name && it.suggested_by_name.trim() ? it.suggested_by_name.trim() : "Someone";
        const stat = byUser.get(name) || { name, count: 0, sumPct: 0 };
        stat.count += 1;
        stat.sumPct += pct;
        byUser.set(name, stat);
      }
      const rows = Array.from(byUser.values())
        .map(r => ({ name: r.name, count: r.count, avgPct: r.count ? r.sumPct / r.count : 0 }))
        .sort((a, b) => b.avgPct - a.avgPct || b.count - a.count || a.name.localeCompare(b.name));
      return rows;
    }

    function renderLeaderboard() {
      const wrap = document.getElementById("leaderWrap");
      const rows = computeLeaderboard();
      if (!rows.length) {
        wrap.innerHTML = `<div class="muted">No data yet, add a few tickers first</div>`;
        return;
      }
      const html = [
        `<table style="width:100%; border-collapse:collapse;">`,
        `<thead><tr><th style="text-align:left; padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;">Rank</th><th style="text-align:left; padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;">Member</th><th style="text-align:left; padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;">Average % change</th><th style="text-align:left; padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;">Picks</th></tr></thead>`,
        `<tbody>`,
        ...rows.map((r, i) => {
          const pct = r.avgPct * 100;
          const cls = pct >= 0 ? "pct up" : "pct down";
          return `<tr>
            <td style="padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;">${i + 1}</td>
            <td style="padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;">${escapeHtml(r.name)}</td>
            <td style="padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;" class="${cls}">${pct.toFixed(2)}%</td>
            <td style="padding:.5rem .6rem; border-bottom:1px solid #2a2a2a;">${r.count}</td>
          </tr>`;
        }),
        `</tbody></table>`
      ].join("");
      wrap.innerHTML = html;
    }

    function escapeHtml(s) {
      return String(s).replace(/[&<>"']/g, c => ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[c] || c));
    }

    /* Render active list */
    function renderActiveList() {
      const q = (document.getElementById("search").value || "").trim().toUpperCase();
      let merged = mergeSortedActive();
      if (q) merged = merged.filter(i => i.ticker && i.ticker.toUpperCase().includes(q));

      const list = document.getElementById("list");
      list.innerHTML = "";
      merged.forEach(it => {
        const suggester = it.suggested_by_name || "Someone";
        const el = document.createElement("div");
        el.className = "item";
        el.innerHTML = `
          <div class="scorebox">
            <div class="score">${it.score}</div>
            <div class="sub">votes</div>
          </div>
          <div class="grow">
            <div class="ticker">${escapeHtml(it.ticker || "")}</div>
            <div class="muted">Suggested by ${escapeHtml(suggester)}</div>
            <div class="muted">${escapeHtml(it.notes || "")}</div>
          </div>
          <div class="scorebox">${pctBadge(it.ticker || "")}</div>
          <div class="right">
            <button class="vote ${it.myVote === 1 ? "active" : ""}" data-id="${it.id}">Vote</button>
            <button class="archive btn-ghost" data-id="${it.id}">Archive</button>
          </div>
        `;
        list.appendChild(el);
      });

      // handlers
      list.querySelectorAll(".vote").forEach(btn => {
        btn.addEventListener("click", async () => {
          if (btn.disabled) return;
          disable(btn, true);
          try { await withLoading("Updating vote", () => onVote(btn.dataset.id)); }
          finally { disable(btn, false); }
        });
      });
      list.querySelectorAll(".archive").forEach(btn => {
        btn.addEventListener("click", async () => {
          if (btn.disabled) return;
          disable(btn, true);
          try { await withLoading("Archiving", () => setArchived(btn.dataset.id, true)); }
          finally { disable(btn, false); }
        });
      });
    }

    /* Render archived list */
    function renderArchivedList() {
      const container = document.getElementById("archList");
      const arr = listArchivedFiltered();
      container.innerHTML = "";
      if (!arr.length) {
        container.innerHTML = `<div class="muted">No archived tickers</div>`;
        return;
      }
      arr.forEach(it => {
        const rec = pctMap[it.ticker] || null;
        const change = rec && typeof rec.pct === "number" ? (rec.pct * 100).toFixed(2) + "%" : "n/a";
        const cls = rec && typeof rec.pct === "number" ? (rec.pct >= 0 ? "pct up" : "pct down") : "muted";
        const el = document.createElement("div");
        el.className = "arch-item";
        el.innerHTML = `
          <div class="arch-left">
            <div class="ticker">${escapeHtml(it.ticker || "")}</div>
            <div class="muted">Suggested by ${escapeHtml(it.suggested_by_name || "Someone")}</div>
            <div class="muted">${escapeHtml(it.notes || "")}</div>
            <div class="${cls}" style="margin-top:.2rem;">${change}</div>
          </div>
          <div class="arch-actions">
            <button class="unarchive" data-id="${it.id}">Unarchive</button>
          </div>
        `;
        container.appendChild(el);
      });

      container.querySelectorAll(".unarchive").forEach(btn => {
        btn.addEventListener("click", async () => {
          if (btn.disabled) return;
          disable(btn, true);
          try { await withLoading("Unarchiving", () => setArchived(btn.dataset.id, false)); }
          finally { disable(btn, false); }
        });
      });
    }

    /* Actions */
    async function setArchived(itemId, state) {
      const res = await withTimeout(
        supabase.from("watchlist_items").update({ archived: !!state }).eq("id", itemId),
        6000,
        "archive toggle"
      );
      if (res !== "__TIMEOUT__" && res?.error) showErr(res.error.message || res.error);
      await fetchAll();
      renderLeaderboard();
      renderActiveList();
      renderArchivedList();
    }

    async function onVote(itemId) {
      const current = myVotes.find(m => m.item_id === itemId);
      if (current) {
        const res = await withTimeout(
          supabase.from("watchlist_votes").delete().match({ item_id: itemId, user_id: currentUser.id }),
          6000,
          "vote delete"
        );
        if (res !== "__TIMEOUT__" && res?.error) showErr(res.error.message || res.error);
      } else {
        const res = await withTimeout(
          supabase.from("watchlist_votes").upsert(
            { item_id: itemId, user_id: currentUser.id, value: 1 },
            { onConflict: "item_id,user_id" }
          ),
          6000,
          "vote upsert"
        );
        if (res !== "__TIMEOUT__" && res?.error) showErr(res.error.message || res.error);
      }
      await fetchAll();
      renderLeaderboard();
      renderActiveList();
      renderArchivedList();
    }

    function showMsg(text, ok=true) {
      const m = document.getElementById("msg");
      m.textContent = text;
      m.className = ok ? "ok" : "error";
      setTimeout(() => { m.textContent = ""; m.className = "muted"; }, 1800);
    }

    async function addItem() {
      const addBtn = document.getElementById("addBtn");
      const t = document.getElementById("ticker").value.trim().toUpperCase();
      const n = document.getElementById("notes").value.trim();
      const market = document.getElementById("market").value;
      if (!t) { showMsg("Please enter a ticker", false); return; }

      const firstName = currentUser?.user_metadata?.first_name || "";
      const fallback = (currentUser?.email || "").split("@")[0] || "Member";
      const displayName = firstName || fallback;

      disable(addBtn, true);
      try {
        await withLoading("Adding ticker", async () => {
          const ins = await withTimeout(
            supabase.from("watchlist_items").insert({ ticker: t, notes: n, created_by: currentUser.id, suggested_by_name: displayName, archived: false }),
            6000,
            "insert item"
          );
          if (ins !== "__TIMEOUT__" && ins?.error) throw ins.error;

          // best effort sheet log
          try {
            await withTimeout(fetch(SHEET_WEBAPP_URL, {
              method: "POST",
              mode: "no-cors",
              headers: { "Content-Type": "text/plain" },
              body: JSON.stringify({ email: currentUser.email || "", user_id: currentUser.id, ticker: t, notes: n, market })
            }), 3000, "sheet log");
          } catch(_) {}

          document.getElementById("ticker").value = "";
          document.getElementById("notes").value = "";
          document.getElementById("market").value = "AUTO";
          showMsg("Added");
          await fetchAll();
          renderLeaderboard();
          renderActiveList();
          renderArchivedList();
        });
      } catch (e) {
        showErr(e.message || e);
        showMsg("Could not add", false);
      } finally {
        disable(addBtn, false);
      }
    }

    /* Realtime, covers archive changes too */
    function setupRealtime() {
      const channel = supabase.channel("watchlist_changes");
      channel.on("postgres_changes", { event: "*", schema: "public", table: "watchlist_items" }, async () => {
        await fetchAll(); renderLeaderboard(); renderActiveList(); renderArchivedList();
      });
      channel.on("postgres_changes", { event: "*", schema: "public", table: "watchlist_votes" }, async () => {
        await fetchAll(); renderLeaderboard(); renderActiveList(); renderArchivedList();
      });
      channel.subscribe();
    }

    function debounce(fn, ms) {
      let t = null;
      return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(null, args), ms); };
    }

    document.getElementById("addBtn").addEventListener("click", addItem);
    document.getElementById("search").addEventListener("input", debounce(renderActiveList, 200));
    document.getElementById("archSearch").addEventListener("input", debounce(renderArchivedList, 200));
    document.getElementById("btnSignOut").addEventListener("click", async () => {
      await supabase.auth.signOut(); location.href = "login.html";
    });

    async function init() {
      await withLoading("Loading watchlist", async () => {
        await guard();
        await fetchAll();
        renderLeaderboard();
        renderActiveList();
        renderArchivedList();
        setupRealtime();
      });

      // refresh percents, keeps leaderboard and badges fresh
      setInterval(async () => {
        const uniqueTickers = Array.from(new Set(items.map(i => i.ticker).filter(Boolean))).join(",");
        if (!uniqueTickers) return;
        try {
          const data = await loadPctJSONP(uniqueTickers, 3500);
          pctMap = data;
          renderLeaderboard();
          renderActiveList();
          renderArchivedList();
        } catch(_) {}
      }, 60000);
    }
    init();
  </script>
</body>
</html>


